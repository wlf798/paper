var e=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(l,s,t)=>s in l?e(l,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[s]=t;import{d as o,x as r,c as m,e as d,f as c,h as u,m as p,l as g,p as x,z as f,aa as b,u as v,dE as y,dG as h,dH as _,bv as w}from"./index-DuNn1tT0.js";import{E}from"./el-row-BI0QOwqJ.js";import{E as P}from"./el-col-D_v_uR8c.js";import{E as R,a as j}from"./el-timeline-item-spCX7rJH.js";import{E as z}from"./el-card-DUwWYAzT.js";/* empty css               */import{E as O}from"./index-BHP5EuW7.js";import"./use-form-common-props-YkJZMUeo.js";const A={class:"w-full py-2"},U={class:"mb-6"},S={class:"m-0 mb-2 text-xl font-medium"},V={class:"mb-6"},C={class:"flex-c gap-5"},I={class:"my-1 text-sm text-g-700"},k={class:"font-semibold"},D={class:"my-1 text-sm text-g-700"},F={class:"mb-6 last:mb-0"},L={class:"best-practices"},M={class:"practices-content"},N={class:"flex-c"},G={class:"size-10 bg-g-200 flex-cc rounded mr-2"},B={class:"flex-c"},H={class:"size-10 bg-g-200 flex-cc rounded mr-2"},T={class:"flex-c"},$={class:"size-10 bg-g-200 flex-cc rounded mr-2"},q={class:"flex-c"},J={class:"size-10 bg-g-200 flex-cc rounded mr-2"},K=o((Q=((e,l)=>{for(var s in l||(l={}))a.call(l,s)&&i(e,s,l[s]);if(t)for(var s of t(l))n.call(l,s)&&i(e,s,l[s]);return e})({},{name:"PermissionPageVisibility"}),l(Q,s({__name:"index",setup(e){const l=r(),s=m(()=>l.info);return(e,l)=>{const t=O,a=z,n=j,i=R,o=b,r=P,m=E;return c(),d("div",A,[u("div",U,[u("h2",S,p(e.$t("menus.examples.permission.pageVisibility")),1),l[0]||(l[0]=u("p",{class:"m-0 text-sm leading-[1.6] text-g-700"},[g(" 此页面仅对"),u("strong",{class:"font-semibold text-warning"},"超级管理员"),g("用户可见，演示页面级别的权限控制。 如果您能看到此页面，说明您拥有相应的访问权限。 ")],-1))]),u("div",V,[x(a,{shadow:"never",class:"art-card-xs"},{header:f(()=>[...l[1]||(l[1]=[u("div",{class:"flex-c gap-2 font-semibold"},[u("span",null,"权限验证成功")],-1)])]),default:f(()=>[u("div",null,[u("div",C,[u("div",null,[l[4]||(l[4]=u("h3",{class:"m-0 mb-2 text-lg font-semibold"},"您拥有访问此页面的权限",-1)),u("p",I,[l[2]||(l[2]=g(" 当前用户：",-1)),u("strong",k,p(s.value.userName),1)]),u("p",D,[l[3]||(l[3]=g(" 用户角色： ",-1)),x(t,{type:"warning"},{default:f(()=>{var e,l;return[g(p((l=(null==(e=s.value.roles)?void 0:e[0])||"",{R_SUPER:"超级管理员",R_ADMIN:"管理员",R_USER:"普通用户"}[l]||"未知角色")),1)]}),_:1})])])])])]),_:1})]),u("div",F,[x(a,{shadow:"never",class:"art-card-xs"},{header:f(()=>[...l[5]||(l[5]=[u("div",{class:"flex-c font-semibold"},[u("span",null,"页面级权限控制说明")],-1)])]),default:f(()=>[u("div",null,[x(i,null,{default:f(()=>[x(n,{timestamp:"前端控制模式",type:"primary",size:"large"},{default:f(()=>[x(a,{shadow:"never"},{default:f(()=>[...l[6]||(l[6]=[u("h4",{class:"m-0 mb-2 text-base font-semibold"},"基于角色的权限控制",-1),u("p",{class:"m-0 mb-2 leading-[1.6] text-g-700"},[g(" 在前端控制模式下，页面访问权限由路由配置文件中的 "),u("code",{class:"px-1.5 py-0.5 font-mono text-xs text-theme bg-theme/12 rounded"},"meta.roles"),g(" 字段定义，前端会根据用户接口所拥有的角色对路由和菜单进行过滤与控制 ")],-1),u("pre",{class:"p-4 mt-3 mb-0 overflow-x-auto font-mono text-xs leading-[1.5] bg-g-200 border-full-d rounded-md"},[u("code",{class:""},"{\n  path: 'page-visibility',\n  name: 'PermissionPageVisibility',\n  component: '/examples/permission/page-visibility',\n  meta: {\n    title: 'menus.permission.pageVisibility',\n    roles: ['R_SUPER'], // 仅超级管理员可访问\n    keepAlive: true\n  }\n}")],-1),u("p",{class:"m-0 mb-2 leading-[1.6] text-g-700"},[u("strong",null,"权限验证流程：")],-1),u("ul",{class:"pl-5 my-2"},[u("li",{class:"my-1 leading-[1.5] text-g-700"},"用户登录后，接口返回用户角色信息（如 R_SUPER、R_ADMIN、R_USER）"),u("li",{class:"my-1 leading-[1.5] text-g-700"},[g(" 在 "),u("code",{class:"px-1.5 py-0.5 font-mono text-xs text-theme bg-theme/12 rounded"},"beforeEach"),g(" 路由守卫中检查目标路由的 "),u("code",{class:"px-1.5 py-0.5 font-mono text-xs text-theme bg-theme/12 rounded"},"roles"),g(" 配置 ")]),u("li",{class:"my-1 leading-[1.5] text-g-700"},"比较用户角色是否包含在允许访问的角色列表中"),u("li",{class:"my-1 leading-[1.5] text-g-700"},"权限不足时跳转到 403 页面")],-1)])]),_:1})]),_:1}),x(n,{timestamp:"后端控制模式",type:"warning",size:"large"},{default:f(()=>[x(a,{shadow:"never"},{default:f(()=>[...l[7]||(l[7]=[u("h4",{class:"m-0 mb-2 text-base font-semibold"},"基于菜单接口的权限控制",-1),u("p",{class:"m-0 mb-2 leading-[1.6] text-g-700"},"在后端控制模式下，页面访问权限由后端统一管理，前端通过解析后端接口返回的菜单列表来生成可访问的路由，从而实现权限控制",-1),u("p",{class:"m-0 mb-2 leading-[1.6] text-g-700"},"接口地址：src/api/menuApi.ts getMenuList",-1),u("pre",{class:"p-4 mt-3 mb-0 overflow-x-auto font-mono text-xs leading-[1.5] bg-g-200 border-full-d rounded-md"},[u("code",{class:""},'\n{\n  "code": 200,\n  "data": [\n    {\n      "id": 1,\n      "path": "/permission",\n      "name": "Permission",\n      "component": "Layout",\n      "meta": {\n        "title": "menus.permission.title",\n        "icon": ""\n      },\n      "children": [\n        {\n          "id": 11,\n          "path": "page-visibility",\n          "name": "PermissionPageVisibility",\n          "component": "permission/page-visibility/index",\n          "meta": {\n            "title": "menus.permission.pageVisibility",\n            "keepAlive": true\n          }\n        }\n      ]\n    }\n  ]\n}')],-1),u("p",null,[u("strong",null,"权限验证流程：")],-1),u("ul",null,[u("li",null,"用户登录成功后获取 Token"),u("li",null,"前端调用菜单接口获取用户可访问的菜单列表"),u("li",null,"前端根据菜单列表动态注册路由"),u("li",null,"菜单中存在的页面用户可以正常访问，不存在的页面会跳转到 404")],-1)])]),_:1})]),_:1}),x(n,{timestamp:"菜单显示控制",type:"success",size:"large"},{default:f(()=>[x(a,{shadow:"never"},{default:f(()=>[...l[8]||(l[8]=[u("h4",null,"侧边栏菜单可见性",-1),u("p",null,[u("strong",null,"前端控制模式：")],-1),u("ul",null,[u("li",null,"有权限的用户：菜单项正常显示，可以点击访问"),u("li",null,"无权限的用户：菜单项不显示，无法通过菜单导航到页面"),u("li",null,"即使通过直接输入URL尝试访问，也会被路由守卫拦截")],-1),u("p",null,[u("strong",null,"后端控制模式：")],-1),u("ul",null,[u("li",null,"侧边栏菜单根据后端返回的菜单列表进行渲染"),u("li",null,"后端应该根据用户权限过滤，只返回用户有权限访问的菜单项"),u("li",null,"前端只显示后端返回的菜单，确保用户只能看到和访问有权限的页面")],-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),u("div",L,[x(a,{shadow:"never",class:"art-card-xs"},{header:f(()=>[...l[9]||(l[9]=[u("div",{class:"card-header"},[u("span",null,"权限控制最佳实践")],-1)])]),default:f(()=>[u("div",M,[x(m,{gutter:24},{default:f(()=>[x(r,{span:12,class:"!mb-5"},{default:f(()=>[u("div",N,[u("div",G,[x(o,{size:"20",color:"#409EFF"},{default:f(()=>[x(v(y))]),_:1})]),l[10]||(l[10]=u("div",null,[u("h4",null,"多层权限验证"),u("p",{class:"text-g-700 text-sm"},"在前端路由、后端接口、UI组件等多个层面实施权限控制，确保安全性。")],-1))])]),_:1}),x(r,{span:12},{default:f(()=>[u("div",B,[u("div",H,[x(o,{size:"20",color:"#67C23A"},{default:f(()=>[x(v(h))]),_:1})]),l[11]||(l[11]=u("div",null,[u("h4",null,"基于角色的访问控制"),u("p",{class:"text-g-700 text-sm"},"采用RBAC模型，通过角色分配权限，简化权限管理复杂度。")],-1))])]),_:1}),x(r,{span:12},{default:f(()=>[u("div",T,[u("div",$,[x(o,{size:"20",color:"#E6A23C"},{default:f(()=>[x(v(_))]),_:1})]),l[12]||(l[12]=u("div",null,[u("h4",null,"细粒度权限控制"),u("p",{class:"text-g-700 text-sm"},"支持页面级、按钮级、数据级等多种粒度的权限控制。")],-1))])]),_:1}),x(r,{span:12},{default:f(()=>[u("div",q,[u("div",J,[x(o,{size:"20",color:"#F56C6C"},{default:f(()=>[x(v(w))]),_:1})]),l[13]||(l[13]=u("div",null,[u("h4",null,"安全性优先原则"),u("p",{class:"text-g-700 text-sm"},"始终遵循最小权限原则，确保用户只能访问必要的功能和数据。")],-1))])]),_:1})]),_:1})])]),_:1})])])}}}))));var Q;export{K as default};
