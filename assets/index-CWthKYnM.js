var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(o,t,r)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,l=(e,o)=>{for(var t in o||(o={}))a.call(o,t)&&s(e,t,o[t]);if(r)for(var t of r(o))i.call(o,t)&&s(e,t,o[t]);return e},n=(e,r)=>o(e,t(r));import{d as p,c as m,e as d,f as u,y as c,k as j,u as f,z as g,p as _,G as b,H as h,h as v,g as x,m as y,a as k,F as w,J as C,ab as O,I as P,l as S,a8 as E,dQ as V,N as A}from"./index-CKM1fen8.js";import{E as T}from"./el-card-CJ1sCfRg.js";import{_ as B}from"./index-CS3o7C6B.js";import{_ as z}from"./index-Bkn6nlmN.js";import{E as I}from"./el-space-C4hwaD0P.js";import{E as N}from"./el-button-DoyUgqJB.js";import{u as R}from"./useTable-DzuECBSH.js";/* empty css                        *//* empty css                  *//* empty css                     */import{a as U,b as D,E as W}from"./el-dropdown-item-CmVgw-He.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-q3ZekBux.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-Dhq_yeMJ.js";import{u as J}from"./useAuth-CIpZtw2C.js";import{_ as q}from"./role-search.vue_vue_type_script_setup_true_lang-CY1C7Ty6.js";import{_ as H}from"./role-edit-dialog.vue_vue_type_script_setup_true_lang-IjVwwF8K.js";import{_ as L}from"./role-permission-dialog.vue_vue_type_script_setup_true_lang-CIZWdbW3.js";import"./tree-select-D3snXuk9.js";import{E as M}from"./overlay--9eulSaS.js";/* empty css              */import{E as Q}from"./index-N7bjZI1X.js";import"./el-pagination-BE1HjgTc.js";import"./el-option-DisnDj8j.js";import"./index-pB6x8TE-.js";import"./index-DmtduCk7.js";import"./index-Ba5jcMC5.js";import"./aria-Dle50h-X.js";import"./index-C0mez0sX.js";import"./use-form-common-props-DQZcihQX.js";import"./index-DayQJJrD.js";import"./token-DWNpOE8r.js";import"./strings-CNX5bs_2.js";import"./castArray-DlxkTWHs.js";import"./index-BM2-Y4df.js";import"./index-B7I_vG9C.js";import"./event-BwRzfsZt.js";import"./index-bQfTT8ye.js";import"./scroll-d-m4ua5F.js";import"./debounce-DTnqz5uK.js";import"./toNumber-D96i-_vD.js";import"./_baseIteratee-DrESJfWH.js";import"./index-e96-4aEG.js";import"./vnode-BPtR4NST.js";/* empty css               *//* empty css                  *//* empty css                 */import"./el-table-column-BPAN9kPJ.js";import"./_initCloneObject-CLrXHQUW.js";import"./isArrayLikeObject-Bhjbp35m.js";import"./raf-yHvaB8QX.js";import"./index-BGUO9W0G.js";/* empty css                    *//* empty css                   */import"./el-empty-W_npPgbf.js";import"./formEnum-BLgiZVxV.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-popover-BvUztomj.js";import"./vue-draggable-plus-DQ_EUkWh.js";import"./useTableColumns-BfrUOmVg.js";import"./refs-Cw5r5QN8.js";import"./index-B4VUBRu_.js";import"./el-form-item-By2N_a5b.js";import"./_baseClone-DuY4jedt.js";import"./el-row-BcGmfk3v.js";import"./el-col-DogW5QcK.js";import"./el-radio-DvX9iq57.js";import"./index-Aj5nPoN_.js";import"./index-D9Z2iav2.js";import"./index-D_6TXvdw.js";import"./validator-7CwAUGKe.js";import"./index-OIjaevOD.js";import"./el-dialog-CH-fnEoz.js";import"./index-BidXo-Mi.js";import"./el-overlay-Bft6Qiui.js";import"./index-Cm6juxQ2.js";/* empty css                  *//* empty css                *//* empty css                */import"./index-DwsxGvSH.js";import"./index-m9BoEEbU.js";import"./cloneDeep-B7zM8sPE.js";import"./clamp-H8AvSXc6.js";const X=p(n(l({},{name:"ArtButtonMore"}),{__name:"index",props:{list:{},auth:{}},emits:["click"],setup(e,{emit:o}){const{hasAuth:t}=J(),r=e,a=m(()=>r.list.some(e=>!e.auth||t(e.auth))),i=o;return(o,r)=>{const s=G,l=F,n=D,p=U,m=W;return u(),d("div",null,[f(a)?(u(),c(m,{key:0},{dropdown:g(()=>[_(p,null,{default:g(()=>[(u(!0),d(b,null,h(e.list,e=>(u(),d(b,{key:e.key},[!e.auth||f(t)(e.auth)?(u(),c(n,{key:0,disabled:e.disabled,onClick:o=>(e=>{i("click",e)})(e)},{default:g(()=>[v("div",{class:"flex-c gap-2",style:x({color:e.color})},[e.icon?(u(),c(l,{key:0,icon:e.icon},null,8,["icon"])):j("",!0),v("span",null,y(e.label),1)],4)]),_:2},1032,["disabled","onClick"])):j("",!0)],64))),128))]),_:1})]),default:g(()=>[_(s,{icon:"ri:more-2-fill",class:"!size-8 bg-g-200 dark:bg-g-300/45 text-sm"})]),_:1})):j("",!0)])}}})),Y={class:"art-full-height"},$=p(n(l({},{name:"Role"}),{__name:"index",setup(e){const o=k({roleName:void 0,roleCode:void 0,description:void 0,enabled:void 0,daterange:void 0}),t=k(!1),s=k(!1),p=k(!1),m=k(void 0),{columns:j,columnChecks:b,data:h,loading:v,pagination:y,getData:U,searchParams:D,resetSearchParams:W,handleSizeChange:F,handleCurrentChange:G,refreshData:J}=R({core:{apiFn:V,apiParams:{current:1,size:20},excludeParams:["daterange"],columnsFactory:()=>[{prop:"roleId",label:"角色ID",width:100},{prop:"roleName",label:"角色名称",minWidth:120},{prop:"roleCode",label:"角色编码",minWidth:120},{prop:"description",label:"角色描述",minWidth:150,showOverflowTooltip:!0},{prop:"enabled",label:"角色状态",width:100,formatter:e=>{const o=e.enabled?{type:"success",text:"启用"}:{type:"warning",text:"禁用"};return E(Q,{type:o.type},()=>o.text)}},{prop:"createTime",label:"创建日期",width:180,sortable:!0},{prop:"operation",label:"操作",width:80,fixed:"right",formatter:e=>E("div",[E(X,{list:[{key:"permission",label:"菜单权限",icon:"ri:user-3-line"},{key:"edit",label:"编辑角色",icon:"ri:edit-2-line"},{key:"delete",label:"删除角色",icon:"ri:delete-bin-4-line",color:"#f56c6c"}],onClick:o=>ee(o,e)})])}]}}),$=k("add"),K=(e,o)=>{s.value=!0,$.value=e,m.value=o},Z=e=>{const o=e,{daterange:t}=o,s=((e,o)=>{var t={};for(var s in e)a.call(e,s)&&o.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&r)for(var s of r(e))o.indexOf(s)<0&&i.call(e,s)&&(t[s]=e[s]);return t})(o,["daterange"]),[p,m]=Array.isArray(t)?t:[null,null];Object.assign(D,n(l({},s),{startTime:p,endTime:m})),U()},ee=(e,o)=>{switch(e.key){case"permission":oe(o);break;case"edit":K("edit",o);break;case"delete":te(o)}},oe=e=>{p.value=!0,m.value=e},te=e=>{M.confirm(`确定删除角色"${e.roleName}"吗？此操作不可恢复！`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A.success("删除成功"),J()}).catch(()=>{A.info("已取消删除")})};return(e,r)=>{const a=N,i=I,l=z,n=B,k=T,E=w("ripple");return u(),d("div",Y,[C(_(q,{modelValue:f(o),"onUpdate:modelValue":r[0]||(r[0]=e=>P(o)?o.value=e:null),onSearch:Z,onReset:f(W)},null,8,["modelValue","onReset"]),[[O,f(t)]]),_(k,{class:"art-table-card",shadow:"never",style:x({"margin-top":f(t)?"12px":"0"})},{default:g(()=>[_(l,{columns:f(b),"onUpdate:columns":r[2]||(r[2]=e=>P(b)?b.value=e:null),showSearchBar:f(t),"onUpdate:showSearchBar":r[3]||(r[3]=e=>P(t)?t.value=e:null),loading:f(v),onRefresh:f(J)},{left:g(()=>[_(i,{wrap:""},{default:g(()=>[C((u(),c(a,{onClick:r[1]||(r[1]=e=>K("add"))},{default:g(()=>[...r[6]||(r[6]=[S("新增角色",-1)])]),_:1})),[[E]])]),_:1})]),_:1},8,["columns","showSearchBar","loading","onRefresh"]),_(n,{loading:f(v),data:f(h),columns:f(j),pagination:f(y),"onPagination:sizeChange":f(F),"onPagination:currentChange":f(G)},null,8,["loading","data","columns","pagination","onPagination:sizeChange","onPagination:currentChange"])]),_:1},8,["style"]),_(H,{modelValue:f(s),"onUpdate:modelValue":r[4]||(r[4]=e=>P(s)?s.value=e:null),"dialog-type":f($),"role-data":f(m),onSuccess:f(J)},null,8,["modelValue","dialog-type","role-data","onSuccess"]),_(L,{modelValue:f(p),"onUpdate:modelValue":r[5]||(r[5]=e=>P(p)?p.value=e:null),"role-data":f(m),onSuccess:f(J)},null,8,["modelValue","role-data","onSuccess"])])}}}));export{$ as default};
