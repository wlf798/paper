var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&r(e,a,t[a]);return e},d=(e,l)=>t(e,a(l));import{af as i,a1 as c,aj as u,bf as p,c as m,_ as y,d as v,W as f,e as h,f as g,k as b,h as x,G as k,H as D,m as w,u as j,i as C,j as _,a as O,ae as V,dw as Y,p as $,z as M,l as S,bC as P,bp as I,bB as E,y as U,ao as R,az as q,I as z}from"./index-CKM1fen8.js";import{E as H}from"./el-dialog-CH-fnEoz.js";import"./el-overlay-Bft6Qiui.js";import{E as A,a as W}from"./el-button-DoyUgqJB.js";import{E as B,a as F}from"./el-form-item-By2N_a5b.js";/* empty css                 *//* empty css                     *//* empty css                  */import{a as G,b as N}from"./el-radio-DvX9iq57.js";/* empty css                       *//* empty css                        */import{r as T,d as J,l as K,W as L,E as Q}from"./index-Aj5nPoN_.js";import{I as X,U as Z}from"./event-BwRzfsZt.js";import{E as ee}from"./index-B7I_vG9C.js";import{_ as te}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BidXo-Mi.js";import"./vnode-BPtR4NST.js";import"./index-DmtduCk7.js";import"./scroll-d-m4ua5F.js";import"./index-Ba5jcMC5.js";import"./aria-Dle50h-X.js";import"./index-Cm6juxQ2.js";import"./refs-Cw5r5QN8.js";import"./index-BM2-Y4df.js";import"./index-C0mez0sX.js";import"./use-form-common-props-DQZcihQX.js";import"./castArray-DlxkTWHs.js";import"./_baseClone-DuY4jedt.js";import"./_initCloneObject-CLrXHQUW.js";import"./index-pB6x8TE-.js";import"./index-DayQJJrD.js";import"./index-D9Z2iav2.js";import"./debounce-DTnqz5uK.js";import"./toNumber-D96i-_vD.js";import"./index-e96-4aEG.js";import"./index-bQfTT8ye.js";const ae=c({selectedDay:{type:u(Object)},range:{type:u(Array)},date:{type:u(Object),required:!0},hideHeader:{type:Boolean}}),le={pick:e=>i(e)},ne=(e,t)=>{J.extend(K);const a=J.localeData().firstDayOfWeek(),{t:l,lang:n}=p(),s=J().locale(n.value),r=m(()=>!!e.range&&!!e.range.length),o=m(()=>{let t=[];if(r.value){const[a,l]=e.range,n=T(l.date()-a.date()+1).map(e=>({text:a.date()+e,type:"current"}));let s=n.length%7;s=0===s?0:7-s;const r=T(s).map((e,t)=>({text:t+1,type:"next"}));t=n.concat(r)}else{const l=e.date.startOf("month").day(),n=((e,t)=>{const a=e.subtract(1,"month").endOf("month").date();return T(t).map((e,l)=>a-(t-l-1))})(e.date,(l-a+7)%7).map(e=>({text:e,type:"prev"})),s=(e=>{const t=e.daysInMonth();return T(t).map((e,t)=>t+1)})(e.date).map(e=>({text:e,type:"current"}));t=[...n,...s];const r=7-(t.length%7||7),o=T(r).map((e,t)=>({text:t+1,type:"next"}));t=t.concat(o)}return(e=>T(e.length/7).map(t=>{const a=7*t;return e.slice(a,a+7)}))(t)}),d=m(()=>{const e=a;return 0===e?L.map(e=>l(`el.datepicker.weeks.${e}`)):L.slice(e).concat(L.slice(0,e)).map(e=>l(`el.datepicker.weeks.${e}`))}),i=(t,a)=>{switch(a){case"prev":return e.date.startOf("month").subtract(1,"month").date(t);case"next":return e.date.startOf("month").add(1,"month").date(t);case"current":return e.date.date(t)}};return{now:s,isInRange:r,rows:o,weekDays:d,getFormattedDate:i,handlePickDay:({text:e,type:a})=>{const l=i(e,a);t("pick",l)},getSlotData:({text:t,type:a})=>{const l=i(t,a);return{isSelected:l.isSame(e.selectedDay),type:`${a}-month`,day:l.format("YYYY-MM-DD"),date:l.toDate()}}}},se=v({name:"DateTable"});var re=y(v(d(o({},se),{props:ae,emits:le,setup(e,{expose:t,emit:a}){const l=e,{isInRange:n,now:s,rows:r,weekDays:o,getFormattedDate:d,handlePickDay:i,getSlotData:c}=ne(l,a),u=f("calendar-table"),p=f("calendar-day"),m=({text:e,type:t})=>{const a=[t];if("current"===t){const n=d(e,t);n.isSame(l.selectedDay,"day")&&a.push(p.is("selected")),n.isSame(s,"day")&&a.push(p.is("today"))}return a};return t({getFormattedDate:d}),(e,t)=>(g(),h("table",{class:C([j(u).b(),j(u).is("range",j(n))]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?b("v-if",!0):(g(),h("thead",{key:0},[x("tr",null,[(g(!0),h(k,null,D(j(o),e=>(g(),h("th",{key:e,scope:"col"},w(e),1))),128))])])),x("tbody",null,[(g(!0),h(k,null,D(j(r),(t,a)=>(g(),h("tr",{key:a,class:C({[j(u).e("row")]:!0,[j(u).em("row","hide-border")]:0===a&&e.hideHeader})},[(g(!0),h(k,null,D(t,(t,a)=>(g(),h("td",{key:a,class:C(m(t)),onClick:e=>j(i)(t)},[x("div",{class:C(j(p).b())},[_(e.$slots,"date-cell",{data:j(c)(t)},()=>[x("span",null,w(t.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}})),[["__file","date-table.vue"]]);const oe=c({modelValue:{type:Date},range:{type:u(Array),validator:e=>V(e)&&2===e.length&&e.every(e=>Y(e))}}),de={[Z]:e=>Y(e),[X]:e=>Y(e)},ie=v({name:"ElCalendar"});const ce=R(y(v(d(o({},ie),{props:oe,emits:de,setup(e,{expose:t,emit:a}){const l=e,n=f("calendar"),{calculateValidatedDateRange:s,date:r,pickDay:o,realSelectedDay:d,selectDate:i,validatedRange:c}=((e,t)=>{const{lang:a}=p(),l=O(),n=J().locale(a.value),s=m({get:()=>e.modelValue?o.value:l.value,set(e){if(!e)return;l.value=e;const a=e.toDate();t(X,a),t(Z,a)}}),r=m(()=>{if(!e.range||!V(e.range)||2!==e.range.length||e.range.some(e=>!Y(e)))return[];const t=e.range.map(e=>J(e).locale(a.value)),[l,n]=t;return l.isAfter(n)?[]:l.isSame(n,"month")?y(l,n):l.add(1,"month").month()!==n.month()?[]:y(l,n)}),o=m(()=>e.modelValue?J(e.modelValue).locale(a.value):s.value||(r.value.length?r.value[0][0]:n)),d=m(()=>o.value.subtract(1,"month").date(1)),i=m(()=>o.value.add(1,"month").date(1)),c=m(()=>o.value.subtract(1,"year").date(1)),u=m(()=>o.value.add(1,"year").date(1)),y=(e,t)=>{const a=e.startOf("week"),l=t.endOf("week"),n=a.get("month"),s=l.get("month");return n===s?[[a,l]]:(n+1)%12===s?((e,t)=>{const a=e.endOf("month"),l=t.startOf("month"),n=a.isSame(l,"week");return[[e,a],[(n?l.add(1,"week"):l).startOf("week"),t]]})(a,l):n+2===s||(n+1)%11===s?((e,t)=>{const a=e.endOf("month"),l=e.add(1,"month").startOf("month"),n=a.isSame(l,"week")?l.add(1,"week"):l,s=n.endOf("month"),r=t.startOf("month"),o=s.isSame(r,"week")?r.add(1,"week"):r;return[[e,a],[n.startOf("week"),s],[o.startOf("week"),t]]})(a,l):[]},v=e=>{s.value=e};return{calculateValidatedDateRange:y,date:o,realSelectedDay:s,pickDay:v,selectDate:e=>{const t={"prev-month":d.value,"next-month":i.value,"prev-year":c.value,"next-year":u.value,today:n}[e];t.isSame(o.value,"day")||v(t)},validatedRange:r}})(l,a),{t:u}=p(),y=m(()=>{const e=`el.datepicker.month${r.value.format("M")}`;return`${r.value.year()} ${u("el.datepicker.year")} ${u(e)}`});return t({selectedDay:d,pickDay:o,selectDate:i,calculateValidatedDateRange:s}),(e,t)=>(g(),h("div",{class:C(j(n).b())},[x("div",{class:C(j(n).e("header"))},[_(e.$slots,"header",{date:j(y)},()=>[x("div",{class:C(j(n).e("title"))},w(j(y)),3),0===j(c).length?(g(),h("div",{key:0,class:C(j(n).e("button-group"))},[$(j(W),null,{default:M(()=>[$(j(A),{size:"small",onClick:e=>j(i)("prev-month")},{default:M(()=>[S(w(j(u)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),$(j(A),{size:"small",onClick:e=>j(i)("today")},{default:M(()=>[S(w(j(u)("el.datepicker.today")),1)]),_:1},8,["onClick"]),$(j(A),{size:"small",onClick:e=>j(i)("next-month")},{default:M(()=>[S(w(j(u)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):b("v-if",!0)])],2),0===j(c).length?(g(),h("div",{key:0,class:C(j(n).e("body"))},[$(re,{date:j(r),"selected-day":j(d),onPick:j(o)},P({_:2},[e.$slots["date-cell"]?{name:"date-cell",fn:M(t=>[_(e.$slots,"date-cell",I(E(t)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(g(),h("div",{key:1,class:C(j(n).e("body"))},[(g(!0),h(k,null,D(j(c),(t,a)=>(g(),U(re,{key:a,date:t[0],"selected-day":j(d),range:t,"hide-header":0!==a,onPick:j(o)},P({_:2},[e.$slots["date-cell"]?{name:"date-cell",fn:M(t=>[_(e.$slots,"date-cell",I(E(t)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}})),[["__file","calendar.vue"]])),ue={class:"page-content mb-5"},pe=["onClick"],me={class:"absolute top-1 right-1 text-sm"},ye={class:"flex flex-col gap-1 w-full max-h-21 pr-1 mt-6 overflow-y-auto"},ve=["onClick"],fe={class:"dialog-footer"},he=te(v(d(o({},{name:"TemplateCalendar"}),{__name:"index",setup(e){const t=[{label:"基本",value:"primary"},{label:"成功",value:"success"},{label:"警告",value:"warning"},{label:"危险",value:"danger"}],a=O(new Date("2025-02-07")),l=O(!1),n=O("添加事件"),s=O(-1),r=O([{date:"2025-02-01",content:"产品需求评审",type:"primary"},{date:"2025-02-03",endDate:"2025-02-05",content:"项目周报会议（跨日期）",type:"primary"},{date:"2025-02-10",content:"瑜伽课程",type:"success"},{date:"2025-02-15",content:"团队建设活动",type:"primary"},{date:"2025-02-20",content:"健身训练",type:"success"},{date:"2025-02-20",content:"代码评审",type:"danger"},{date:"2025-02-20",content:"团队午餐",type:"primary"},{date:"2025-02-20",content:"项目进度汇报",type:"warning"},{date:"2025-02-28",content:"月度总结会",type:"warning"}]),i=O({date:"",endDate:"",content:"",type:"primary"}),c=m(()=>s.value>=0),u=()=>{i.value={date:"",endDate:"",content:"",type:"primary"},s.value=-1},p=()=>{i.value.content&&i.value.date&&(c.value?r.value[s.value]=o({},i.value):r.value.push(o({},i.value)),l.value=!1,u())},y=()=>{c.value&&(r.value.splice(s.value,1),l.value=!1,u())};return(e,m)=>{const v=ce,f=ee,_=F,O=N,V=G,Y=Q,P=B,I=A,E=H;return g(),h("div",ue,[$(v,{modelValue:j(a),"onUpdate:modelValue":m[0]||(m[0]=e=>z(a)?a.value=e:null)},{"date-cell":M(({data:e})=>{return[x("div",{class:C(["relative flex flex-col h-full min-h-30 max-h-30 p-1 overflow-hidden c-p",{"is-selected":e.isSelected}]),onClick:t=>{return a=e.day,n.value="添加事件",i.value={date:a,content:"",type:"primary"},s.value=-1,void(l.value=!0);var a}},[x("p",me,w((a=e.day,a.split("-")[2])),1),x("div",ye,[(g(!0),h(k,null,D((t=e.day,r.value.filter(e=>{const a=new Date(e.date),l=new Date(t),n=e.endDate?new Date(e.endDate):new Date(e.date);return l>=a&&l<=n}).map(e=>{const{bgClass:t,textClass:a}=((e="primary")=>({primary:{bgClass:"bg-theme/12",textClass:"text-theme"},success:{bgClass:"bg-success/12",textClass:"text-success"},warning:{bgClass:"bg-warning/12",textClass:"text-warning"},danger:{bgClass:"bg-danger/12",textClass:"text-danger"}}[e]))(e.type);return d(o({},e),{bgClass:t,textClass:a})})),e=>(g(),h("div",{key:`${e.date}-${e.content}`,onClick:q(t=>(e=>{n.value="编辑事件",i.value=o({},e),s.value=r.value.findIndex(t=>t.date===e.date&&t.content===e.content),l.value=!0})(e),["stop"])},[x("div",{class:C(["min-w-25 px-3 py-1.5 overflow-hidden text-xs/6 font-medium text-ellipsis whitespace-nowrap rounded hover:opacity-80",[e.bgClass,e.textClass]])},w(e.content),3)],8,ve))),128))])],10,pe)];var t,a}),_:1},8,["modelValue"]),$(E,{modelValue:j(l),"onUpdate:modelValue":m[5]||(m[5]=e=>z(l)?l.value=e:null),title:j(n),width:"600px",onClosed:u},{footer:M(()=>[x("span",fe,[j(c)?(g(),U(I,{key:0,type:"danger",onClick:y},{default:M(()=>[...m[6]||(m[6]=[S(" 删除 ",-1)])]),_:1})):b("",!0),$(I,{type:"primary",onClick:p},{default:M(()=>[S(w(j(c)?"更新":"添加"),1)]),_:1})])]),default:M(()=>[$(P,{model:j(i),"label-width":"80px"},{default:M(()=>[$(_,{label:"活动标题",required:""},{default:M(()=>[$(f,{modelValue:j(i).content,"onUpdate:modelValue":m[1]||(m[1]=e=>j(i).content=e),placeholder:"请输入活动标题"},null,8,["modelValue"])]),_:1}),$(_,{label:"事件颜色"},{default:M(()=>[$(V,{modelValue:j(i).type,"onUpdate:modelValue":m[2]||(m[2]=e=>j(i).type=e)},{default:M(()=>[(g(),h(k,null,D(t,e=>$(O,{key:e.value,value:e.value},{default:M(()=>[S(w(e.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),$(_,{label:"开始日期",required:""},{default:M(()=>[$(Y,{style:{width:"100%"},modelValue:j(i).date,"onUpdate:modelValue":m[3]||(m[3]=e=>j(i).date=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),$(_,{label:"结束日期"},{default:M(()=>[$(Y,{style:{width:"100%"},modelValue:j(i).endDate,"onUpdate:modelValue":m[4]||(m[4]=e=>j(i).endDate=e),type:"date",placeholder:"选择结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","min-date":j(i).date},null,8,["modelValue","min-date"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}})),[["__scopeId","data-v-297c2b51"]]);export{he as default};
