var e=Object.defineProperty,r=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(r,n,t)=>n in r?e(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,p=(e,r)=>{for(var n in r||(r={}))l.call(r,n)&&o(e,n,r[n]);if(t)for(var n of t(r))a.call(r,n)&&o(e,n,r[n]);return e},s=(e,t)=>r(e,n(t));import{dK as u,a as c,w as i,c as m}from"./index-CKM1fen8.js";const d={selection:{prop:"__selection__",label:u("table.column.selection")},expand:{prop:"__expand__",label:u("table.column.expand")},index:{prop:"__index__",label:u("table.column.index")}},b=e=>{var r,n;return null!=(n=null==(r=d[e.type])?void 0:r.prop)?n:e.prop},v=e=>{var r;return void 0!==e.visible?e.visible:null==(r=e.checked)||r},y=e=>e.map(e=>{const r=e.type&&d[e.type],n=v(e);return s(p({},e),r?{prop:r.prop,label:r.label,checked:!0,visible:!0}:{checked:n,visible:n})});function f(e){const r=c(e()),n=c(y(r.value));i(r,e=>{const r=new Map(n.value.map(e=>[b(e),v(e)])),t=y(e).map(e=>{const n=b(e),t=r.has(n)?r.get(n):v(e);return s(p({},e),{checked:t,visible:t})});n.value=t},{deep:!0});const t=m(()=>{const e=new Map(r.value.map(e=>[b(e),e]));return n.value.filter(e=>v(e)).map(r=>e.get(b(r))).filter(Boolean)}),l=e=>{const n=[...r.value],t=e(n);r.value=Array.isArray(t)?t:n};return{columns:t,columnChecks:n,addColumn:(e,r)=>l(n=>{const t=[...n],l=Array.isArray(e)?e:[e],a="number"==typeof r&&r>=0&&r<=t.length?r:t.length;return t.splice(a,0,...l),t}),removeColumn:e=>l(r=>{const n=Array.isArray(e)?e:[e];return r.filter(e=>!n.includes(b(e)))}),updateColumn:(e,r)=>{Array.isArray(e)?l(r=>{const n=new Map(e.map(e=>[e.prop,e.updates]));return r.map(e=>{const r=b(e),t=n.get(r);return t?p(p({},e),t):e})}):r&&l(n=>n.map(n=>b(n)===e?p(p({},n),r):n))},toggleColumn:(e,r)=>{const t=Array.isArray(e)?e:[e],l=[...n.value];t.forEach(e=>{const n=l.findIndex(r=>b(r)===e);if(n>-1){const e=v(l[n]),t=null!=r?r:!e;l[n]=s(p({},l[n]),{checked:t,visible:t})}}),n.value=l},resetColumns:()=>{r.value=e()},batchUpdateColumns:e=>l(r=>{const n=new Map(e.map(e=>[e.prop,e.updates]));return r.map(e=>{const r=b(e),t=n.get(r);return t?p(p({},e),t):e})}),reorderColumns:(e,r)=>l(n=>{if(e<0||e>=n.length||r<0||r>=n.length||e===r)return n;const t=[...n],[l]=t.splice(e,1);return t.splice(r,0,l),t}),getColumnConfig:e=>r.value.find(r=>b(r)===e),getAllColumns:()=>[...r.value]}}export{b as g,f as u};
