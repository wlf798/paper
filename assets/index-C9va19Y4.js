var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{_ as o}from"./index.vue_vue_type_script_setup_true_lang-q3ZekBux.js";import{d as r,a as d,c as u,aA as c,e as m,p,Y as x,z as h,J as b,ab as w,u as v,h as f,g as y,G as g,H as k,i as _,y as D,k as P,m as E,P as L,f as O}from"./index-CKM1fen8.js";import{_ as W}from"./_plugin-vue_export-helper-BCo6x5W8.js";const j={class:"menu-right"},$=["onClick"],M={class:"menu-label flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-g-800"},I={class:"submenu-title flex-c w-full"},R={class:"menu-label flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-g-800"},H=["onClick"],T={class:"menu-label flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-g-800"},A=r((C=((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&l(e,n,t[n]);return e})({},{name:"ArtMenuRight"}),t(C,n({__name:"index",props:{menuItems:{},menuWidth:{default:120},submenuWidth:{default:150},itemHeight:{default:32},boundaryDistance:{default:10},menuPadding:{default:5},itemPaddingX:{default:6},borderRadius:{default:6},animationDuration:{default:100}},emits:["select","show","hide"],setup(e,{expose:t,emit:n}){L(e=>({v1f416ad6:a.menuWidth+"px",v02a4cd80:a.borderRadius+"px",v6d3065f4:a.animationDuration+"ms"}));const a=e,i=n,s=d(!1),l=d({x:0,y:0});let r=null,W=!1;const A=u(()=>({position:"fixed",left:`${l.value.x}px`,top:`${l.value.y}px`,zIndex:2e3,width:`${a.menuWidth}px`})),C=u(()=>({padding:`${a.menuPadding}px`})),z=u(()=>({height:`${a.itemHeight}px`,padding:`0 ${a.itemPaddingX}px`,borderRadius:"4px"})),X=u(()=>({minWidth:`${a.submenuWidth}px`,padding:`${a.menuPadding}px 0`,borderRadius:`${a.borderRadius}px`})),S=e=>{const t=window.innerWidth,n=window.innerHeight,i=(()=>{let e=2*a.menuPadding;return a.menuItems.forEach(t=>{e+=a.itemHeight,t.showLine&&(e+=10)}),e})();let s=e.clientX,l=e.clientY;return s+a.menuWidth>t-a.boundaryDistance&&(s=Math.max(a.boundaryDistance,s-a.menuWidth)),l+i>n-a.boundaryDistance&&(l=Math.max(a.boundaryDistance,n-i-a.boundaryDistance)),s=Math.max(a.boundaryDistance,Math.min(s,t-a.menuWidth-a.boundaryDistance)),l=Math.max(a.boundaryDistance,Math.min(l,n-i-a.boundaryDistance)),{x:s,y:l}},Y=()=>{W&&(document.removeEventListener("click",q),document.removeEventListener("contextmenu",B),document.removeEventListener("keydown",G),W=!1)},q=e=>{const t=e.target,n=document.querySelector(".context-menu");n&&n.contains(t)||J()},B=()=>{J()},G=e=>{"Escape"===e.key&&J()},J=()=>{s.value&&(s.value=!1,i("hide"),r&&(window.clearTimeout(r),r=null),Y())},F=e=>{e.disabled||(i("select",e),J())},K=e=>{e.style.transformOrigin="top left"},N=()=>{Y(),r&&(window.clearTimeout(r),r=null)};return c(()=>{Y(),r&&(window.clearTimeout(r),r=null)}),t({show:e=>{e.preventDefault(),e.stopPropagation(),r&&(window.clearTimeout(r),r=null),l.value=S(e),s.value=!0,i("show"),r=window.setTimeout(()=>{s.value&&(W||(document.addEventListener("click",q),document.addEventListener("contextmenu",B),document.addEventListener("keydown",G),W=!0)),r=null},50)},hide:J,visible:u(()=>s.value)}),(t,n)=>{const a=o;return O(),m("div",j,[p(x,{name:"context-menu",onBeforeEnter:K,onAfterLeave:N},{default:h(()=>[b(f("div",{style:y(v(A)),class:"context-menu art-card-xs !shadow-xl min-w-[var(--menu-width)] w-[var(--menu-width)]"},[f("ul",{class:"menu-list m-0 list-none",style:y(v(C))},[(O(!0),m(g,null,k(e.menuItems,e=>(O(),m(g,{key:e.key},[e.children?(O(),m("li",{key:1,class:"menu-item submenu relative flex-c c-p select-none rounded text-xs transition-colors duration-150 hover:bg-g-200",style:y(v(z))},[f("div",I,[e.icon?(O(),D(a,{key:0,class:"mr-2 shrink-0 text-base text-g-800",icon:e.icon},null,8,["icon"])):P("",!0),f("span",R,E(e.label),1),p(a,{icon:"ri:arrow-right-s-line",class:"ubmenu-arrow ml-auto mr-0 text-base text-g-500 transition-transform duration-150"})]),f("ul",{class:"submenu-list art-card-xs absolute left-full top-0 z-[2001] hidden w-max min-w-max list-none !shadow-xl",style:y(v(X))},[(O(!0),m(g,null,k(e.children,e=>(O(),m("li",{key:e.key,class:_(["menu-item relative mx-1.5 flex-c c-p select-none rounded text-xs transition-colors duration-150 hover:bg-g-200",{"is-disabled":e.disabled,"has-line":e.showLine}]),style:y(v(z)),onClick:t=>F(e)},[e.icon?(O(),D(a,{key:0,class:"r-2 shrink-0 text-base text-g-800 mr-1",icon:e.icon},null,8,["icon"])):P("",!0),f("span",T,E(e.label),1)],14,H))),128))],4)],4)):(O(),m("li",{key:0,class:_(["menu-item relative flex-c c-p select-none rounded text-xs transition-colors duration-150 hover:bg-g-200",{"is-disabled":e.disabled,"has-line":e.showLine}]),style:y(v(z)),onClick:t=>F(e)},[e.icon?(O(),D(a,{key:0,class:"mr-2 shrink-0 text-base text-g-800",icon:e.icon},null,8,["icon"])):P("",!0),f("span",M,E(e.label),1)],14,$))],64))),128))],4)],4),[[w,v(s)]])]),_:1})])}}}))));var C;const z=W(A,[["__scopeId","data-v-6b7fea37"]]);export{z as A};
