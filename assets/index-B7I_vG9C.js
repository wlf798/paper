var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,i=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e},r=(e,o)=>t(e,a(o)),u=(e,t,a)=>new Promise((o,n)=>{var l=e=>{try{i(a.next(e))}catch(t){n(t)}},s=e=>{try{i(a.throw(e))}catch(t){n(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(l,s);i((a=a.apply(e,t)).next())});import{aS as p,bs as d,a9 as c,a1 as f,aj as m,al as v,ad as b,bm as h,aU as y,a7 as g,aw as x,a as w,w as S,bt as C,b2 as k,u as z,n as E,d as I,bu as P,b4 as j,c as F,W as B,bh as O,bv as N,bw as $,ah as M,ag as _,o as R,an as V,e as T,f as A,k as H,G as L,h as U,i as W,j as D,y as G,z as K,at as X,aa as Y,X as q,az as J,bx as Q,m as Z,g as ee,bk as te,af as ae,_ as oe,ao as ne}from"./index-CKM1fen8.js";import{u as le,d as se}from"./index-DmtduCk7.js";import{U as ie,I as re,C as ue}from"./event-BwRzfsZt.js";import{u as pe}from"./index-bQfTT8ye.js";import{u as de,a as ce}from"./index-BM2-Y4df.js";import{u as fe,a as me}from"./use-form-common-props-DQZcihQX.js";import{i as ve}from"./aria-Dle50h-X.js";let be;const he={height:"0",visibility:"hidden",overflow:d()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"];function ge(e,t=1,a){var o,n;be||(be=document.createElement("textarea"),(null!=(o=e.parentNode)?o:document.body).appendChild(be));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ye.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(e);r.forEach(([e,t])=>null==be?void 0:be.style.setProperty(e,t)),Object.entries(he).forEach(([e,t])=>null==be?void 0:be.style.setProperty(e,t,"important")),be.value=e.value||e.placeholder||"";let u=be.scrollHeight;const d={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),be.value="";const c=be.scrollHeight-l;if(p(t)){let e=c*t;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),d.minHeight=`${e}px`}if(p(a)){let e=c*a;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return d.height=`${u}px`,null==(n=be.parentNode)||n.removeChild(be),be=void 0,d}const xe=f(r(i({id:{type:String,default:void 0},size:y,disabled:Boolean,modelValue:{type:m([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:m([Boolean,Object]),default:!1},autocomplete:{type:m(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:b,default:h},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:b},prefixIcon:{type:b},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:m([Object,Array,String]),default:()=>v({})},autofocus:Boolean,rows:{type:Number,default:2}},le(["ariaLabel"])),{inputmode:{type:m(String),default:void 0},name:String})),we={[ie]:e=>c(e),input:e=>c(e),change:e=>c(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};function Se(e,{disabled:t,beforeFocus:a,afterFocus:o,beforeBlur:n,afterBlur:l}={}){const s=g(),{emit:i}=s,r=x(),u=w(!1),p=e=>{const n=!!k(a)&&a(e);z(t)||u.value||n||(u.value=!0,i("focus",e),null==o||o())},d=e=>{var a;const o=!!k(n)&&n(e);z(t)||e.relatedTarget&&(null==(a=r.value)?void 0:a.contains(e.relatedTarget))||o||(u.value=!1,i("blur",e),null==l||l())};return S([r,()=>z(t)],([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))}),C(r,"focus",p,!0),C(r,"blur",d,!0),C(r,"click",a=>{var o,n;z(t)||ve(a.target)||(null==(o=r.value)?void 0:o.contains(document.activeElement))&&r.value!==document.activeElement||null==(n=e.value)||n.focus()},!0),{isFocused:u,wrapperRef:r,handleFocus:p,handleBlur:d}}function Ce({afterComposition:e,emit:t}){const a=w(!1),o=e=>{var o;null==t||t("compositionupdate",e);const n=null==(o=e.target)?void 0:o.value,l=n[n.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},n=o=>{null==t||t("compositionend",o),a.value&&(a.value=!1,E(()=>e(o)))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?n(e):o(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),a.value=!0},handleCompositionUpdate:o,handleCompositionEnd:n}}const ke=I({name:"ElInput",inheritAttrs:!1});const ze=ne(oe(I(r(i({},ke),{props:xe,emits:we,setup(e,{expose:t,emit:a}){const o=e,n=P(),l=pe(),s=j(),r=F(()=>["textarea"===o.type?h.b():b.b(),b.m(m.value),b.is("disabled",v.value),b.is("exceed",Oe.value),{[b.b("group")]:s.prepend||s.append,[b.m("prefix")]:s.prefix||o.prefixIcon,[b.m("suffix")]:s.suffix||o.suffixIcon||o.clearable||o.showPassword,[b.bm("suffix","password-clear")]:Pe.value&&je.value,[b.b("hidden")]:"hidden"===o.type},n.class]),p=F(()=>[b.e("wrapper"),b.is("focus",ve.value)]),{form:d,formItem:c}=de(),{inputId:f}=ce(o,{formItemContext:c}),m=fe(),v=me(),b=B("input"),h=B("textarea"),y=x(),g=x(),C=w(!1),k=w(!1),I=w(),oe=x(o.inputStyle),ne=F(()=>y.value||g.value),{wrapperRef:le,isFocused:ve,handleFocus:be,handleBlur:he}=Se(ne,{disabled:v,afterBlur(){var e;o.validateEvent&&(null==(e=null==c?void 0:c.validate)||e.call(c,"blur").catch(e=>se()))}}),ye=F(()=>{var e;return null!=(e=null==d?void 0:d.statusIcon)&&e}),xe=F(()=>(null==c?void 0:c.validateState)||""),we=F(()=>xe.value&&O[xe.value]),ke=F(()=>k.value?N:$),ze=F(()=>[n.style]),Ee=F(()=>[o.inputStyle,oe.value,{resize:o.resize}]),Ie=F(()=>M(o.modelValue)?"":String(o.modelValue)),Pe=F(()=>o.clearable&&!v.value&&!o.readonly&&!!Ie.value&&(ve.value||C.value)),je=F(()=>o.showPassword&&!v.value&&!!Ie.value),Fe=F(()=>o.showWordLimit&&!!o.maxlength&&("text"===o.type||"textarea"===o.type)&&!v.value&&!o.readonly&&!o.showPassword),Be=F(()=>Ie.value.length),Oe=F(()=>!!Fe.value&&Be.value>Number(o.maxlength)),Ne=F(()=>!!s.suffix||!!o.suffixIcon||Pe.value||o.showPassword||Fe.value||!!xe.value&&ye.value),[$e,Me]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(y);_(g,e=>{if(Re(),!Fe.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;I.value={right:`calc(100% - ${a+15+6}px)`}});const _e=()=>{const{type:e,autosize:t}=o;if(te&&"textarea"===e&&g.value)if(t){const e=ae(t)?t.minRows:void 0,a=ae(t)?t.maxRows:void 0,o=ge(g.value,e,a);oe.value=i({overflowY:"hidden"},o),E(()=>{g.value.offsetHeight,oe.value=o})}else oe.value={minHeight:ge(g.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!o.autosize)return;null===(null==(a=g.value)?void 0:a.offsetParent)||(setTimeout(e),t=!0)}})(_e),Ve=()=>{const e=ne.value,t=o.formatter?o.formatter(Ie.value):Ie.value;e&&e.value!==t&&(e.value=t)},Te=e=>u(null,null,function*(){$e();let{value:t}=e.target;o.formatter&&o.parser&&(t=o.parser(t)),He.value||(t!==Ie.value?(a(ie,t),a(re,t),yield E(),Ve(),Me()):Ve())}),Ae=e=>{let{value:t}=e.target;o.formatter&&o.parser&&(t=o.parser(t)),a(ue,t)},{isComposing:He,handleCompositionStart:Le,handleCompositionUpdate:Ue,handleCompositionEnd:We}=Ce({emit:a,afterComposition:Te}),De=()=>{$e(),k.value=!k.value,setTimeout(Me)},Ge=e=>{C.value=!1,a("mouseleave",e)},Ke=e=>{C.value=!0,a("mouseenter",e)},Xe=e=>{a("keydown",e)},Ye=()=>{a(ie,""),a(ue,""),a("clear"),a(re,"")};return S(()=>o.modelValue,()=>{var e;E(()=>_e()),o.validateEvent&&(null==(e=null==c?void 0:c.validate)||e.call(c,"change").catch(e=>se()))}),S(Ie,()=>Ve()),S(()=>o.type,()=>u(null,null,function*(){yield E(),Ve(),_e()})),R(()=>{!o.formatter&&o.parser,Ve(),E(_e)}),t({input:y,textarea:g,ref:ne,textareaStyle:Ee,autosize:V(o,"autosize"),isComposing:He,focus:()=>{var e;return null==(e=ne.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=ne.value)?void 0:e.blur()},select:()=>{var e;null==(e=ne.value)||e.select()},clear:Ye,resizeTextarea:_e}),(e,t)=>(A(),T("div",{class:W([z(r),{[z(b).bm("group","append")]:e.$slots.append,[z(b).bm("group","prepend")]:e.$slots.prepend}]),style:ee(z(ze)),onMouseenter:Ke,onMouseleave:Ge},[H(" input "),"textarea"!==e.type?(A(),T(L,{key:0},[H(" prepend slot "),e.$slots.prepend?(A(),T("div",{key:0,class:W(z(b).be("group","prepend"))},[D(e.$slots,"prepend")],2)):H("v-if",!0),U("div",{ref_key:"wrapperRef",ref:le,class:W(z(p))},[H(" prefix slot "),e.$slots.prefix||e.prefixIcon?(A(),T("span",{key:0,class:W(z(b).e("prefix"))},[U("span",{class:W(z(b).e("prefix-inner"))},[D(e.$slots,"prefix"),e.prefixIcon?(A(),G(z(Y),{key:0,class:W(z(b).e("icon"))},{default:K(()=>[(A(),G(X(e.prefixIcon)))]),_:1},8,["class"])):H("v-if",!0)],2)],2)):H("v-if",!0),U("input",q({id:z(f),ref_key:"input",ref:y,class:z(b).e("inner")},z(l),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?k.value?"text":"password":e.type,disabled:z(v),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:z(Le),onCompositionupdate:z(Ue),onCompositionend:z(We),onInput:Te,onChange:Ae,onKeydown:Xe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),H(" suffix slot "),z(Ne)?(A(),T("span",{key:1,class:W(z(b).e("suffix"))},[U("span",{class:W(z(b).e("suffix-inner"))},[z(Pe)&&z(je)&&z(Fe)?H("v-if",!0):(A(),T(L,{key:0},[D(e.$slots,"suffix"),e.suffixIcon?(A(),G(z(Y),{key:0,class:W(z(b).e("icon"))},{default:K(()=>[(A(),G(X(e.suffixIcon)))]),_:1},8,["class"])):H("v-if",!0)],64)),z(Pe)?(A(),G(z(Y),{key:1,class:W([z(b).e("icon"),z(b).e("clear")]),onMousedown:J(z(Q),["prevent"]),onClick:Ye},{default:K(()=>[(A(),G(X(e.clearIcon)))]),_:1},8,["class","onMousedown"])):H("v-if",!0),z(je)?(A(),G(z(Y),{key:2,class:W([z(b).e("icon"),z(b).e("password")]),onClick:De},{default:K(()=>[(A(),G(X(z(ke))))]),_:1},8,["class"])):H("v-if",!0),z(Fe)?(A(),T("span",{key:3,class:W(z(b).e("count"))},[U("span",{class:W(z(b).e("count-inner"))},Z(z(Be))+" / "+Z(e.maxlength),3)],2)):H("v-if",!0),z(xe)&&z(we)&&z(ye)?(A(),G(z(Y),{key:4,class:W([z(b).e("icon"),z(b).e("validateIcon"),z(b).is("loading","validating"===z(xe))])},{default:K(()=>[(A(),G(X(z(we))))]),_:1},8,["class"])):H("v-if",!0)],2)],2)):H("v-if",!0)],2),H(" append slot "),e.$slots.append?(A(),T("div",{key:1,class:W(z(b).be("group","append"))},[D(e.$slots,"append")],2)):H("v-if",!0)],64)):(A(),T(L,{key:1},[H(" textarea "),U("textarea",q({id:z(f),ref_key:"textarea",ref:g,class:[z(h).e("inner"),z(b).is("focus",z(ve))]},z(l),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:z(v),readonly:e.readonly,autocomplete:e.autocomplete,style:z(Ee),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:z(Le),onCompositionupdate:z(Ue),onCompositionend:z(We),onInput:Te,onFocus:z(be),onBlur:z(he),onChange:Ae,onKeydown:Xe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),z(Fe)?(A(),T("span",{key:0,style:ee(I.value),class:W(z(b).e("count"))},Z(z(Be))+" / "+Z(e.maxlength),7)):H("v-if",!0)],64))],38))}})),[["__file","input.vue"]]));export{ze as E,Se as a,Ce as u};
