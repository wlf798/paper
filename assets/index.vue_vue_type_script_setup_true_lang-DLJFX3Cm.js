var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,n=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(o)for(var t of o(a))r.call(a,t)&&i(e,t,a[t]);return e},s=(e,o)=>a(e,t(o));import{d,a as u,c,d6 as y,w as h,o as p,b as f,J as m,aP as g,e as v,f as b,g as x,n as w,d7 as A}from"./index-DuNn1tT0.js";import{g as L}from"./echarts-DSKumXTW.js";import{u as S,a as O}from"./useChart-PCpbVufL.js";const j=d(s(n({},{name:"ArtLineChart"}),{__name:"index",props:{data:{default:()=>[0,0,0,0,0,0,0]},xAxisData:{default:()=>[]},lineWidth:{default:2.5},showAreaColor:{type:Boolean,default:!1},smooth:{type:Boolean,default:!0},symbol:{default:"none"},symbolSize:{default:6},animationDelay:{default:200},height:{default:S().chartHeight},loading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},colors:{default:()=>S().colors},showAxisLabel:{type:Boolean,default:!0},showAxisLine:{type:Boolean,default:!0},showSplitLine:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},showLegend:{type:Boolean,default:!1},legendPosition:{default:"bottom"}},setup(e){const a=e,t=u(!1),o=u([]),l=u([]),r=()=>{o.value.forEach(e=>clearTimeout(e)),o.value=[]},i=c(()=>Array.isArray(a.data)&&a.data.length>0&&"object"==typeof a.data[0]&&"name"in a.data[0]),d=c(()=>{if(i.value){return a.data.reduce((e,a)=>{var t;if(null==(t=a.data)?void 0:t.length){const t=Math.max(...a.data);return Math.max(e,t)}return e},0)}{const e=a.data;return(null==e?void 0:e.length)?Math.max(...e):0}}),S=c(()=>y("--el-color-primary")),j=(e,t)=>e||(void 0!==t?a.colors[t%a.colors.length]:S.value),D=e=>{var t,o,l,r,i;return{name:e.name,data:e.data,type:"line",color:e.color,smooth:null!=(t=e.smooth)?t:a.smooth,symbol:null!=(o=e.symbol)?o:a.symbol,symbolSize:null!=(l=e.symbolSize)?l:a.symbolSize,lineStyle:{width:null!=(r=e.lineWidth)?r:a.lineWidth,color:e.color},areaStyle:e.areaStyle,emphasis:{focus:"series",lineStyle:{width:(null!=(i=e.lineWidth)?i:a.lineWidth)+1}}}},B=(e=!1)=>{const t={animation:!0,animationDuration:e?0:1300,animationDurationUpdate:e?0:1300,grid:R(a.showLegend&&i.value,a.legendPosition,{top:15,right:15,left:0}),tooltip:a.showTooltip?_():void 0,xAxis:{type:"category",boundaryGap:!1,data:a.xAxisData,axisTick:z(),axisLine:E(a.showAxisLine),axisLabel:k(a.showAxisLabel)},yAxis:{type:"value",min:0,max:d.value,axisLabel:k(a.showAxisLabel),axisLine:E(a.showAxisLine),splitLine:G(a.showSplitLine)}};if(a.showLegend&&i.value&&(t.legend=M(a.legendPosition)),i.value){const e=l.value;t.series=e.map((e,t)=>{const o=j(a.colors[t],t),l=((e,t)=>{if(!e.areaStyle&&!e.showAreaColor&&!a.showAreaColor)return;const o=e.areaStyle||{};return o.custom?o.custom:{color:new L.LinearGradient(0,0,0,1,[{offset:0,color:A(t,o.startOpacity||.2).rgba},{offset:1,color:A(t,o.endOpacity||.02).rgba}])}})(e,o);return D({name:e.name,data:e.data,color:o,smooth:e.smooth,symbol:e.symbol,lineWidth:e.lineWidth,areaStyle:l})})}else{const e=l.value,o=j(a.colors[0]),r=(()=>{if(!a.showAreaColor)return;const e=j(a.colors[0]);return{color:new L.LinearGradient(0,0,0,1,[{offset:0,color:A(e,.2).rgba},{offset:1,color:A(e,.02).rgba}])}})();t.series=[D({data:e,color:o,areaStyle:r})]}return t},P=e=>{C(e)},T=()=>{if(r(),t.value=!0,l.value=(()=>{if(i.value)return a.data.map(e=>s(n({},e),{data:Array(e.data.length).fill(0)}));const e=a.data;return Array(e.length).fill(0)})(),P(B(!0)),i.value){const e=a.data,r=l.value;e.forEach((e,t)=>{const i=window.setTimeout(()=>{r[t]=s(n({},e),{data:[...e.data]}),l.value=[...r],P(B(!1))},t*a.animationDelay+100);o.value.push(i)});const i=(e.length-1)*a.animationDelay+1500,d=window.setTimeout(()=>{t.value=!1},i);o.value.push(d)}else w(()=>{l.value=i.value?a.data.map(e=>s(n({},e),{data:[...e.data]})):[...a.data],P(B(!1)),t.value=!1})},{chartRef:W,initChart:C,getAxisLineStyle:E,getAxisLabelStyle:k,getAxisTickStyle:z,getSplitLineStyle:G,getTooltipStyle:_,getLegendStyle:M,getGridWithLegend:R,isEmpty:H}=O({props:a,checkEmpty:()=>{if(Array.isArray(a.data)&&"number"==typeof a.data[0]){const e=a.data;return!e.length||e.every(e=>0===e)}if(Array.isArray(a.data)&&"object"==typeof a.data[0]){const e=a.data;return!e.length||e.every(e=>{var a;return!(null==(a=e.data)?void 0:a.length)||e.data.every(e=>0===e)})}return!0},watchSources:[()=>a.data,()=>a.xAxisData,()=>a.colors],onVisible:()=>{H.value||T()},generateOptions:()=>B(!1)}),I=()=>{t.value||H.value||T()};return h([()=>a.data,()=>a.xAxisData,()=>a.colors],I,{deep:!0}),p(()=>{I()}),f(()=>{r()}),(e,t)=>{const o=g;return m((b(),v("div",{ref_key:"chartRef",ref:W,class:"relative w-[calc(100%+10px)]",style:x({height:a.height})},null,4)),[[o,a.loading]])}}}));export{j as _};
