import{d as e,c as a,d4 as t,aw as u,d5 as l,w as s,aA as r,e as i,f as n,i as v,m as d,n as o}from"./index-CKM1fen8.js";const f="easeOutExpo",p=e({__name:"index",props:{target:{default:0},duration:{default:2e3},autoStart:{type:Boolean,default:!0},decimals:{default:0},decimal:{default:"."},separator:{default:""},prefix:{default:""},suffix:{default:""},easing:{default:f},disabled:{type:Boolean,default:!1}},emits:["started","finished","paused","reset"],setup(e,{expose:p,emit:c}){const m=Number.EPSILON,g=e,b=c,x=(e,a,t)=>Number.isFinite(e)?e:t,h=(e,a,t)=>Math.max(a,Math.min(e,t)),S=a(()=>x(g.target,0,0)),F=a(()=>h(x(g.duration,0,2e3),100,6e4)),N=a(()=>h(x(g.decimals,0,0),0,10)),M=a(()=>{const e=g.easing;return e in t?e:f}),$=u(0),y=u(S.value),B=u(!1),_=u(!1),j=u(0),w=l($,{duration:F,transition:a(()=>t[M.value]),onStarted:()=>{B.value=!0,_.value=!1,b("started",y.value)},onFinished:()=>{B.value=!1,_.value=!1,b("finished",y.value)}}),E=a(()=>{const e=_.value?j.value:w.value;if(!Number.isFinite(e))return`${g.prefix}0${g.suffix}`;const a=((e,a,t,u)=>{let l=a>0?e.toFixed(a):Math.floor(e).toString();if("."!==t&&l.includes(".")&&(l=l.replace(".",t)),u){const e=l.split(t);e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,u),l=e.join(t)}return l})(e,N.value,g.decimal,g.separator);return`${g.prefix}${a}${g.suffix}`}),O=()=>{_.value=!1,j.value=0},P=e=>{if(g.disabled)return;const a=void 0!==e?e:y.value;Number.isFinite(a)&&(y.value=a,(e=>{const a=_.value?j.value:w.value;return Math.abs(a-e)<m})(a)||(_.value&&($.value=j.value,O()),o(()=>{$.value=a})))},V=()=>{(B.value||_.value)&&($.value=0,O(),b("paused",0))};return s(S,e=>{g.autoStart&&!g.disabled?P(e):y.value=e},{immediate:g.autoStart&&!g.disabled}),s(()=>g.disabled,e=>{e&&B.value&&V()}),r(()=>{B.value&&V()}),p({start:P,pause:()=>{B.value&&!_.value&&(_.value=!0,j.value=w.value,$.value=j.value,b("paused",j.value))},reset:(e=0)=>{const a=x(e,0,0);$.value=a,y.value=a,O(),b("reset")},stop:V,setTarget:e=>{Number.isFinite(e)&&(y.value=e,!B.value&&!g.autoStart||g.disabled||P(e))},get isRunning(){return B.value},get isPaused(){return _.value},get currentValue(){return _.value?j.value:w.value},get targetValue(){return y.value},get progress(){const e=_.value?j.value:w.value,a=y.value;return 0===a?0===e?1:0:Math.abs(e/a)}}),(e,a)=>(n(),i("span",{class:v(["text-g-900 tabular-nums",B.value?"transition-opacity duration-300 ease-in-out":""])},d(E.value),3))}});export{p as _};
