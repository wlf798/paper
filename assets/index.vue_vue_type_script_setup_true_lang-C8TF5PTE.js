import{_ as e}from"./index.vue_vue_type_script_setup_true_lang-q3ZekBux.js";import{d as a,q as t,s as l,a as r,c as s,ct as o,cu as n,cv as i,w as u,aM as c,o as d,b as v,e as f,g as p,i as h,u as x,h as m,k as g,p as y,j as w,f as b,cw as k}from"./index-CKM1fen8.js";const _=["innerHTML"],C=["innerHTML"],H=a({__name:"index",props:{text:{default:""},type:{default:"theme"},direction:{default:"left"},speed:{default:80},width:{default:"100%"},height:{default:"36px"},pauseOnHover:{type:Boolean,default:!0},showClose:{type:Boolean,default:!1},alwaysScroll:{type:Boolean,default:!0}},emits:["close"],setup(a,{emit:H}){const $=a,L=H,M=()=>{L("close")},T=t(),{isDark:j}=l(T),B=r(),R=r(),O=r(),S=r(!1),q=r(0),z=r(0),A=r(0),D=r(!1),N=s(()=>"left"===$.direction||"right"===$.direction),P=s(()=>"right"===$.direction||"down"===$.direction),{width:W,height:X}=o(B),Y=n(B),E=s(()=>!$.alwaysScroll&&z.value<=A.value||$.pauseOnHover&&Y.value),F=s(()=>{const e={theme:"text-theme/90 !border-theme/50",primary:"text-primary/90 !border-primary/50",secondary:"text-secondary/90 !border-secondary/50",error:"text-error/90 !border-error/50",info:"text-info/90 !border-info/50",success:"text-success/90 !border-success/50",warning:"text-warning/90 !border-warning/50",danger:"text-danger/90 !border-danger/50"};return e[$.type]||e.theme}),G=s(()=>`color-mix(in oklch, var(--color-${$.type}) ${j.value?"25":"10"}%, var(--art-color))`),I=s(()=>({width:$.width,height:$.height,backgroundColor:G.value})),J=s(()=>N.value?"":"flex flex-col"),K=s(()=>({transform:N.value?`translateX(${q.value}px)`:`translateY(${q.value}px)`,willChange:"transform"})),Q=s(()=>N.value?{marginLeft:"2em"}:{marginTop:"2em"}),U=()=>{if(!B.value||!O.value)return;const e=O.value;N.value?(A.value=W.value,z.value=e.offsetWidth):(A.value=X.value,z.value=e.offsetHeight);const a=z.value>A.value;D.value=a,q.value=(A.value-z.value)/2,S.value||(S.value=!0)},V=k(U,150);let Z=0;const{pause:ee,resume:ae}=i(({timestamp:e})=>{if(Z||(Z=e),!E.value){const a=(e-Z)/1e3,t=$.speed*a,l=.1*z.value;q.value+=P.value?t:-t,P.value?q.value>A.value&&(q.value=-(z.value+l)):q.value<-(z.value+l)&&(q.value=A.value)}Z=e},{immediate:!1}),te=e=>{"A"===e.target.tagName&&e.stopPropagation()};u([W,X],()=>{V()}),u(()=>[$.direction,$.speed,$.text],()=>{U(),Z=0});const{start:le}=c(()=>{U(),ae()},100);return d(()=>{le()}),v(()=>{ee()}),(t,l)=>{const r=e;return b(),f("div",{ref_key:"containerRef",ref:B,class:h(["relative overflow-hidden rounded-custom-sm border flex-c box-border text-sm",x(F)]),style:p(x(I))},[m("div",{class:"flex-cc absolute left-0 h-full w-9 z-10",style:p({backgroundColor:x(G)})},[y(r,{icon:"ri:volume-down-line",class:"text-lg"})],4),m("div",{ref_key:"contentRef",ref:R,class:h(["whitespace-nowrap inline-block transition-opacity duration-600 [&_a]:text-danger [&_a:hover]:underline [&_a:hover]:text-danger/80 px-9",[x(J),{"opacity-0":!x(S),"opacity-100":x(S)}]]),style:p(x(K)),onClick:te},[m("span",{ref_key:"textRef",ref:O,class:"inline-block"},[w(t.$slots,"default",{},()=>[m("span",{innerHTML:a.text},null,8,_)])],512),x(D)?(b(),f("span",{key:0,class:"inline-block",style:p(x(Q))},[w(t.$slots,"default",{},()=>[m("span",{innerHTML:a.text},null,8,C)])],4)):g("",!0)],6),a.showClose?(b(),f("div",{key:0,class:"flex-cc absolute right-0 h-full w-9 c-p",style:p({backgroundColor:x(G)}),onClick:M},[y(r,{icon:"ri:close-fill",class:"text-lg"})],4)):g("",!0)],6)}}});export{H as _};
