import{d as e,a as l,c as a,r as o,w as r,y as t,f as d,z as s,p as u,u as i,l as m,I as n,N as p}from"./index-CKM1fen8.js";import{E as c}from"./el-dialog-CH-fnEoz.js";import"./el-overlay-Bft6Qiui.js";import{E as f}from"./el-button-DoyUgqJB.js";import{E as g,a as V}from"./el-form-item-By2N_a5b.js";/* empty css                  *//* empty css                 */import{E as b}from"./index-B7I_vG9C.js";import{E as y}from"./index-D_6TXvdw.js";const v=e({__name:"role-edit-dialog",props:{modelValue:{type:Boolean,default:!1},dialogType:{default:"add"},roleData:{default:void 0}},emits:["update:modelValue","success"],setup(e,{emit:v}){const j=e,_=v,h=l(),x=a({get:()=>j.modelValue,set:e=>_("update:modelValue",e)}),C=o({roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}),w=o({roleId:0,roleName:"",roleCode:"",description:"",createTime:"",enabled:!0});r(()=>j.modelValue,e=>{e&&N()}),r(()=>j.roleData,e=>{e&&j.modelValue&&N()},{deep:!0});const N=()=>{"edit"===j.dialogType&&j.roleData?Object.assign(w,j.roleData):Object.assign(w,{roleId:0,roleName:"",roleCode:"",description:"",createTime:"",enabled:!0})},E=()=>{var e;x.value=!1,null==(e=h.value)||e.resetFields()},T=()=>{return e=null,l=null,a=function*(){if(h.value)try{yield h.value.validate();const e="add"===j.dialogType?"新增成功":"修改成功";p.success(e),_("success"),E()}catch(e){}},new Promise((o,r)=>{var t=e=>{try{s(a.next(e))}catch(l){r(l)}},d=e=>{try{s(a.throw(e))}catch(l){r(l)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,d);s((a=a.apply(e,l)).next())});var e,l,a};return(l,a)=>{const o=b,r=V,p=y,v=g,j=f,_=c;return d(),t(_,{modelValue:i(x),"onUpdate:modelValue":a[4]||(a[4]=e=>n(x)?x.value=e:null),title:"add"===e.dialogType?"新增角色":"编辑角色",width:"30%","align-center":"",onClose:E},{footer:s(()=>[u(j,{onClick:E},{default:s(()=>[...a[5]||(a[5]=[m("取消",-1)])]),_:1}),u(j,{type:"primary",onClick:T},{default:s(()=>[...a[6]||(a[6]=[m("提交",-1)])]),_:1})]),default:s(()=>[u(v,{ref_key:"formRef",ref:h,model:i(w),rules:i(C),"label-width":"120px"},{default:s(()=>[u(r,{label:"角色名称",prop:"roleName"},{default:s(()=>[u(o,{modelValue:i(w).roleName,"onUpdate:modelValue":a[0]||(a[0]=e=>i(w).roleName=e),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),u(r,{label:"角色编码",prop:"roleCode"},{default:s(()=>[u(o,{modelValue:i(w).roleCode,"onUpdate:modelValue":a[1]||(a[1]=e=>i(w).roleCode=e),placeholder:"请输入角色编码"},null,8,["modelValue"])]),_:1}),u(r,{label:"描述",prop:"description"},{default:s(()=>[u(o,{modelValue:i(w).description,"onUpdate:modelValue":a[2]||(a[2]=e=>i(w).description=e),type:"textarea",rows:3,placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1}),u(r,{label:"启用"},{default:s(()=>[u(p,{modelValue:i(w).enabled,"onUpdate:modelValue":a[3]||(a[3]=e=>i(w).enabled=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{v as _};
